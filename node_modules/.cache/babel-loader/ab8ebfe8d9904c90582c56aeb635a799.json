{"ast":null,"code":"import _slicedToArray from\"/Users/rhendren/Desktop/text/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import PageLoader from\"./../components/PageLoader\";import FormAlert from\"./../components/FormAlert\";import{useAuth,requireAuth}from\"./../util/auth.js\";import{useRouter}from\"./../util/router.js\";import{redirectToCheckout}from\"./../util/stripe.js\";function PurchasePage(props){var router=useRouter();var auth=useAuth();var _useState=useState(),_useState2=_slicedToArray(_useState,2),formAlert=_useState2[0],setFormAlert=_useState2[1];useEffect(function(){if(auth.user.planIsActive){// If user already has an active plan\n// then take them to Stripe billing\nrouter.push(\"/settings/billing\");}else{// Otherwise go to checkout\nredirectToCheckout(router.query.plan).catch(function(error){setFormAlert({type:\"error\",message:error.message});});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/React.createElement(PageLoader,null,formAlert&&/*#__PURE__*/React.createElement(FormAlert,{type:formAlert.type,message:formAlert.message,style:{maxWidth:\"500px\"}}));}export default requireAuth(PurchasePage);","map":{"version":3,"sources":["/Users/rhendren/Desktop/text/src/pages/purchase.js"],"names":["React","useEffect","useState","PageLoader","FormAlert","useAuth","requireAuth","useRouter","redirectToCheckout","PurchasePage","props","router","auth","formAlert","setFormAlert","user","planIsActive","push","query","plan","catch","error","type","message","maxWidth"],"mappings":"mJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,mBAArC,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,OAASC,kBAAT,KAAmC,qBAAnC,CAEA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAC3B,GAAMC,CAAAA,MAAM,CAAGJ,SAAS,EAAxB,CACA,GAAMK,CAAAA,IAAI,CAAGP,OAAO,EAApB,CAF2B,cAGOH,QAAQ,EAHf,wCAGpBW,SAHoB,eAGTC,YAHS,eAK3Bb,SAAS,CAAC,UAAM,CACd,GAAIW,IAAI,CAACG,IAAL,CAAUC,YAAd,CAA4B,CAC1B;AACA;AACAL,MAAM,CAACM,IAAP,CAAY,mBAAZ,EACD,CAJD,IAIO,CACL;AACAT,kBAAkB,CAACG,MAAM,CAACO,KAAP,CAAaC,IAAd,CAAlB,CAAsCC,KAAtC,CAA4C,SAACC,KAAD,CAAW,CACrDP,YAAY,CAAC,CACXQ,IAAI,CAAE,OADK,CAEXC,OAAO,CAAEF,KAAK,CAACE,OAFJ,CAAD,CAAZ,CAID,CALD,EAMD,CAED;AACD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,mBACE,oBAAC,UAAD,MACGV,SAAS,eACR,oBAAC,SAAD,EACE,IAAI,CAAEA,SAAS,CAACS,IADlB,CAEE,OAAO,CAAET,SAAS,CAACU,OAFrB,CAGE,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAZ,CAHT,EAFJ,CADF,CAWD,CAED,cAAelB,CAAAA,WAAW,CAACG,YAAD,CAA1B","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PageLoader from \"./../components/PageLoader\";\nimport FormAlert from \"./../components/FormAlert\";\nimport { useAuth, requireAuth } from \"./../util/auth.js\";\nimport { useRouter } from \"./../util/router.js\";\nimport { redirectToCheckout } from \"./../util/stripe.js\";\n\nfunction PurchasePage(props) {\n  const router = useRouter();\n  const auth = useAuth();\n  const [formAlert, setFormAlert] = useState();\n\n  useEffect(() => {\n    if (auth.user.planIsActive) {\n      // If user already has an active plan\n      // then take them to Stripe billing\n      router.push(\"/settings/billing\");\n    } else {\n      // Otherwise go to checkout\n      redirectToCheckout(router.query.plan).catch((error) => {\n        setFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      });\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <PageLoader>\n      {formAlert && (\n        <FormAlert\n          type={formAlert.type}\n          message={formAlert.message}\n          style={{ maxWidth: \"500px\" }}\n        />\n      )}\n    </PageLoader>\n  );\n}\n\nexport default requireAuth(PurchasePage);\n"]},"metadata":{},"sourceType":"module"}